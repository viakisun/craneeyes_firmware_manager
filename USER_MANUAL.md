# CraneEyes Firmware Manager - 사용자 매뉴얼

## 목차

1. [시스템 개요](#시스템-개요)
2. [주요 기능](#주요-기능)
3. [사용자 가이드](#사용자-가이드)
4. [관리자 가이드](#관리자-가이드)
5. [API 문서](#api-문서)
6. [트러블슈팅](#트러블슈팅)

---

## 시스템 개요

CraneEyes Firmware Manager는 크레인 펌웨어 파일을 안전하게 관리하고 배포하는 웹 기반 플랫폼입니다.

### 주요 특징

- 웹 기반 인터페이스로 모든 디바이스에서 접근 가능
- AWS S3를 통한 안전한 파일 저장소
- PostgreSQL 데이터베이스로 메타데이터 관리
- 실시간 활동 로그 및 다운로드 추적
- 관리자 권한으로 완전한 펌웨어 관리
- 다국어 지원 (한글 파일명 및 설명 지원)

### 시스템 요구사항

**클라이언트 요구사항:**
- 최신 웹 브라우저 (Chrome, Firefox, Safari, Edge)
- 인터넷 연결

**서버 요구사항:**
- Node.js 18 이상
- PostgreSQL 12 이상 (AWS RDS 권장)
- AWS S3 버킷
- 최소 2GB RAM
- 최소 10GB 저장 공간

---

## 주요 기능

### 공개 포털 기능

#### 1. 펌웨어 브라우징
- 카테고리별 크레인 모델 탐색
- 펌웨어 버전별 검색 및 필터링
- 펌웨어 상세 정보 확인

#### 2. 안전한 다운로드
- 직접 파일 다운로드
- 다운로드 횟수 자동 추적
- 다운로드 전 파일 크기 확인

#### 3. 모델 조직화
- Stick Crane (스틱 크레인)
- Knuckle Crane (넉클 크레인)
- 서브 카테고리별 세분화 (5T, 7T, 10T 등)

### 관리자 패널 기능

#### 1. 펌웨어 관리
- 새 펌웨어 업로드
- 기존 펌웨어 정보 수정
- 펌웨어 삭제
- 버전 관리

#### 2. 모델 관리
- 새 크레인 모델 추가
- 모델 정보 수정
- 모델 삭제

#### 3. 활동 로그
- 모든 시스템 활동 추적
- 다운로드 기록
- 업로드 기록
- 사용자 활동 기록

#### 4. 대시보드
- 시스템 통계 확인
- 최근 활동 모니터링
- 펌웨어 및 모델 개수 추적

---

## 사용자 가이드

### 공개 포털 사용법

#### 1. 홈페이지 접속

브라우저에서 시스템 URL로 접속합니다.

**주요 구성요소:**
- 헤더: 상단 네비게이션 바
- 메인 콘텐츠: 펌웨어 정보 및 다운로드
- 푸터: 시스템 정보

#### 2. 펌웨어 탐색

**모델 페이지 접근:**
- 홈페이지에서 "Browse Firmware" 버튼 클릭
- 또는 상단 메뉴에서 "Models" 선택

**카테고리별 탐색:**
- Stick Crane 또는 Knuckle Crane 카테고리 선택
- 원하는 모델 클릭하여 펌웨어 목록 확인

**펌웨어 정보 확인:**
- 버전 번호
- 릴리스 날짜
- 파일 크기
- 다운로드 횟수
- 설명

#### 3. 펌웨어 다운로드

**다운로드 절차:**
1. 원하는 펌웨어 버전 선택
2. "Download" 버튼 클릭
3. 파일 다운로드 확인
4. 다운로드 후 설치

**주의사항:**
- 파일 크기를 확인하여 충분한 저장 공간 확보
- 올바른 모델에 해당하는 펌웨어인지 확인
- 호환 가능한 버전인지 확인

#### 4. 검색 기능

**검색 방법:**
- 상단 검색바에 모델명 입력
- 실시간 결과 표시
- 검색 결과에서 직접 다운로드 가능

---

## 관리자 가이드

### 관리자 로그인

#### 1. 로그인 절차

**로그인 페이지 접근:**
- 홈페이지에서 "Admin Access" 버튼 클릭
- 또는 URL에 `/admin/login` 직접 입력

**로그인 정보:**
- 이메일: 관리자 이메일 주소
- 비밀번호: 관리자 비밀번호

**기본 관리자 계정:**
- 이메일: `crane@dy.co.kr`
- 비밀번호: `1234`

**주의:** 초기 배포 후 즉시 비밀번호를 변경하세요.

#### 2. 대시보드

**대시보드 주요 정보:**
- 총 모델 개수
- 총 펌웨어 개수
- 총 다운로드 횟수
- 최근 활동
- 시스템 통계

**대시보드 기능:**
- 실시간 데이터 업데이트
- 그래프 및 차트로 시각화
- 빠른 액세스 메뉴

#### 3. 펌웨어 관리

**새 펌웨어 업로드:**

1. **Firmwares** 메뉴 선택
2. **Upload Firmware** 버튼 클릭
3. **필수 정보 입력:**
   - 모델 선택 (드롭다운)
   - 버전 번호 (예: 1.0.0)
   - 릴리스 날짜
   - 파일 크기
   - 설명

4. **파일 업로드:**
   - 파일 선택
   - 지원 형식: .bin, .pdf, .zip 등
   - 최대 파일 크기: 100MB

5. **저장** 버튼 클릭

**펌웨어 수정:**

1. Firmwares 페이지에서 수정할 펌웨어 선택
2. "Edit" 버튼 클릭
3. 정보 수정
4. "Save" 버튼 클릭

**펌웨어 삭제:**

1. Firmwares 페이지에서 삭제할 펌웨어 선택
2. "Delete" 버튼 클릭
3. 확인 대화상자에서 확인

**주의:** 삭제된 펌웨어는 복구할 수 없습니다.

#### 4. 모델 관리

**새 모델 추가:**

1. **Models** 메뉴 선택
2. **Add Model** 버튼 클릭
3. **정보 입력:**
   - 모델명 (예: SS1416)
   - 카테고리 (Stick Crane / Knuckle Crane)
   - 서브 카테고리 (예: 5T, 7T, 10T)
   - 초기 펌웨어 개수 (0)

4. **저장** 버튼 클릭

**모델 수정:**

1. Models 페이지에서 수정할 모델 선택
2. "Edit" 버튼 클릭
3. 정보 수정
4. "Save" 버튼 클릭

**모델 삭제:**

1. Models 페이지에서 삭제할 모델 선택
2. "Delete" 버튼 클릭
3. 확인 대화상자에서 확인

**주의:** 모델을 삭제하면 해당 모델의 모든 펌웨어도 함께 삭제됩니다.

#### 5. 활동 로그

**로그 확인:**

1. **Logs** 메뉴 선택
2. 로그 목록 확인
3. 필터링 및 검색 기능 사용

**로그 정보:**
- 활동 유형 (업로드, 다운로드, 삭제 등)
- 사용자 이메일
- 모델명
- 버전 번호
- IP 주소
- 타임스탬프

**로그 검색:**
- 날짜 범위 선택
- 활동 유형 필터링
- 모델명 검색

#### 6. 시스템 초기화

**완전 초기화:**

1. 대시보드에서 "Complete Reset" 버튼 클릭
2. 확인 대화상자에 "DELETE" 입력
3. "Confirm" 버튼 클릭

**주의:** 
- 모든 펌웨어 파일이 삭제됩니다
- 모든 모델 정보가 삭제됩니다
- 모든 로그가 삭제됩니다
- 이 작업은 되돌릴 수 없습니다

**용도:**
- 테스트 환경 초기화
- 시스템 재구축
- 개발 중간 재시작

---

## API 문서

### API 개요

CraneEyes Firmware Manager는 RESTful API를 제공합니다.

**Base URL:** `http://your-domain.com/api`

### 인증

현재 세션 기반 인증을 사용합니다. 관리자 라우트는 인증이 필요합니다.

### 엔드포인트

#### Health Check

**GET** `/api/health`

API 서버 상태 확인

**응답:**
```json
{
  "status": "OK",
  "message": "CraneEyes API Server is running"
}
```

#### Models

**GET** `/api/models`

모든 크레인 모델 목록 조회

**응답:**
```json
[
  {
    "id": 1,
    "name": "SS1416",
    "category": "Stick Crane",
    "subCategory": "5T",
    "firmwareCount": 1
  }
]
```

**POST** `/api/models`

새 모델 생성

**요청 본문:**
```json
{
  "name": "SS1416",
  "category": "Stick Crane",
  "subCategory": "5T",
  "firmwareCount": 0
}
```

#### Firmwares

**GET** `/api/firmwares`

모든 펌웨어 파일 목록 조회

**응답:**
```json
[
  {
    "id": 1,
    "modelId": 1,
    "modelName": "SS1416",
    "version": "1.0.0",
    "releaseDate": "2025-01-20T00:00:00.000Z",
    "size": "2.5 MB",
    "downloads": 0,
    "s3Key": "firmwares/SS1416/1.0.0/firmware.bin",
    "description": "Initial release"
  }
]
```

**POST** `/api/firmwares`

새 펌웨어 업로드

**요청 본문:**
```json
{
  "modelId": 1,
  "version": "1.0.0",
  "releaseDate": "2025-01-20",
  "size": "2.5 MB",
  "downloads": 0,
  "s3Key": "firmwares/SS1416/1.0.0/firmware.bin",
  "description": "Initial release"
}
```

**PUT** `/api/firmwares/:id`

펌웨어 정보 수정

**요청 본문:**
```json
{
  "version": "1.1.0",
  "description": "Updated description"
}
```

**DELETE** `/api/firmwares/:id`

펌웨어 삭제

**POST** `/api/firmwares/:id/download`

다운로드 횟수 증가

#### Logs

**GET** `/api/logs`

활동 로그 조회

**응답:**
```json
[
  {
    "id": 1,
    "type": "download",
    "user": "crane@dy.co.kr",
    "model": "SS1416",
    "version": "1.0.0",
    "ip": "127.0.0.1",
    "timestamp": "2025-01-20T10:00:00.000Z"
  }
]
```

**POST** `/api/logs`

새 로그 엔트리 생성

**요청 본문:**
```json
{
  "type": "upload",
  "user": "crane@dy.co.kr",
  "model": "SS1416",
  "version": "1.0.0",
  "ip": "127.0.0.1",
  "timestamp": "2025-01-20T10:00:00"
}
```

### 에러 응답

모든 엔드포인트는 적절한 HTTP 상태 코드를 반환합니다:

- `200` - 성공
- `400` - 잘못된 요청
- `404` - 찾을 수 없음
- `500` - 내부 서버 오류

**에러 응답 형식:**
```json
{
  "error": "Error message description"
}
```

---

## 트러블슈팅

### 일반적인 문제

#### 1. 로그인이 안 됩니다

**가능한 원인:**
- 잘못된 이메일 또는 비밀번호
- 서버 연결 문제
- 브라우저 캐시 문제

**해결 방법:**
1. 이메일과 비밀번호를 다시 확인
2. 브라우저를 새로고침
3. 브라우저 캐시 삭제
4. 시크릿 모드에서 로그인 시도

#### 2. 펌웨어를 다운로드할 수 없습니다

**가능한 원인:**
- 파일이 존재하지 않음
- 네트워크 연결 문제
- 권한 문제

**해결 방법:**
1. 브라우저 개발자 도구에서 네트워크 에러 확인
2. 파일 URL을 직접 확인
3. 관리자에게 문의

#### 3. 페이지가 로드되지 않습니다

**가능한 원인:**
- 서버 다운
- 네트워크 문제
- 브라우저 호환성 문제

**해결 방법:**
1. 서버 상태 확인 (health check)
2. 다른 브라우저에서 시도
3. 네트워크 연결 확인
4. 개발자 도구에서 에러 확인

#### 4. 업로드가 실패합니다

**가능한 원인:**
- 파일 크기 초과
- 지원하지 않는 파일 형식
- 서버 저장 공간 부족
- 네트워크 문제

**해결 방법:**
1. 파일 크기 확인 (최대 100MB)
2. 파일 형식 확인
3. 네트워크 연결 확인
4. 다시 시도

### 고급 문제 해결

#### 백엔드 로그 확인

**PM2 로그:**
```bash
pm2 logs craneeyes-api
```

**Nginx 로그:**
```bash
sudo tail -f /var/log/nginx/craneeyes_error.log
```

#### 데이터베이스 연결 확인

```bash
psql -h your-rds-endpoint -U postgres -d crane_firmware
```

#### API 상태 확인

```bash
curl http://localhost:3001/api/health
```

### 성능 최적화

#### 1. 파일 캐싱

브라우저 캐시를 활용하여 반복 다운로드 시간을 단축합니다.

#### 2. 데이터베이스 인덱싱

자주 검색되는 필드에 인덱스를 추가하여 성능을 향상시킵니다.

#### 3. CDN 사용

S3 버킷을 CloudFront와 연동하여 글로벌 콘텐츠 전송 속도를 향상시킵니다.

---

## 추가 리소스

### 문서

- [README.md](README.md) - 프로젝트 개요
- [DEPLOY.md](DEPLOY.md) - 배포 가이드
- [docs/api/README.md](docs/api/README.md) - API 상세 문서
- [docs/database/README.md](docs/database/README.md) - 데이터베이스 문서

### 지원

문제가 발생하거나 도움이 필요한 경우:

1. 시스템 관리자에게 문의
2. GitHub Issues에 보고
3. 프로젝트 문서 확인

---

**CraneEyes Firmware Manager v0.1.0**

더 나은 크레인 펌웨어 관리를 위해 만들어졌습니다.

